// bootstrap
import Accordion from 'react-bootstrap/Accordion';
import Tab from "react-bootstrap/Tab";
import Tabs from "react-bootstrap/Tabs"
import ListGroup from 'react-bootstrap/ListGroup';
import Badge from 'react-bootstrap/Badge';
import Row from 'react-bootstrap/Row';
import Col from 'react-bootstrap/Col';
import Container from 'react-bootstrap/Container';

function VulnerabilityAccordion({vulnerabilities}) {
    return (
        <Accordion alwaysOpen>
        {vulnerabilities.map((vulnerability, index) => 
          <Accordion.Item key={index} eventKey={index}>
            <Accordion.Header>
              <Container>
                <Row>
                  <Col xs lg="2"><Badge pill bg="dark">CVSS: 9.6</Badge></Col>
                  <Col xs lg="2">{vulnerability.event.returnValues.vulnerabilityId}</Col>
                  <Col xs lg="4">{vulnerability.event.returnValues.productId}</Col>
                  <Col xs lg="3">{new Date(vulnerability.block.timestamp * 1000).toString()}</Col>
                </Row>
              </Container>
            </Accordion.Header>
            <Accordion.Body>
              <h5>Description</h5>
              <br />
              <Tabs>
                <Tab eventKey="VulnerabilityDetails" title="Vulnerability details">
                <Row>
                  <Col xs lg="2">
                    <ListGroup variant="flush">
                      <ListGroup.Item>Vendor</ListGroup.Item>
                      <ListGroup.Item>Severity</ListGroup.Item>
                      <ListGroup.Item>Remidiations</ListGroup.Item>
                    </ListGroup>
                  </Col>
                  <Col xs lg="10">
                    <ListGroup variant="flush">
                      <ListGroup.Item>{vulnerability.tx.to}</ListGroup.Item>
                      <ListGroup.Item>It is very severe ngl...</ListGroup.Item>
                      <ListGroup.Item>Idk just update shit I guess.</ListGroup.Item>
                    </ListGroup>
                  </Col>
                </Row>
                </Tab>
                <Tab eventKey="TransactionData" title="Transaction data">
                  <div><pre>{JSON.stringify(vulnerability.tx, null, 2)}</pre></div>
                </Tab>
                <Tab eventKey="BlockData" title="Block data">
                  <div><pre>{JSON.stringify(vulnerability.block, null, 2)}</pre></div>
                </Tab>
                <Tab eventKey="AdvisoryData" title="Advisory data">
                  <div><pre>{vulnerability.advisory}</pre></div>
                </Tab>
              </Tabs>
            </Accordion.Body>
          </Accordion.Item>
        )}
      </Accordion>
    )
}
export default VulnerabilityAccordion;